<!doctype html>
<html lang="en" ng-app="texasApp">
<head>
  <meta charset="UTF-8">
  <title>Texas Hold'em Poker Game</title>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/bower_components/angular/angular.js"></script>
  <script src="/bower_components/angular-socket-io/socket.js"></script>
  <script src="/bower_components/angular-bootstrap/ui-bootstrap.js"></script>
  <script src="/slider.js"></script>
  <script src="/texas.js"></script>
  <link rel="stylesheet" href="/bootstrap.min.css">
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/slider.css">
</head>
<body ng-controller="TableController as table">
  <ul class="pages">
    <li class="main page" ng-show="connected">
      <div class="hallArea">
        <div>
          <span>Available Tables: </span>
          <button class="btn btn-default btn-sm" ng-repeat="table_name in tables" ng-click="join(table_name)">{{table_name}}</button>
          New Table:<input type="text" ng-model="new_table" /> <button class="btn btn-default btn-sm" ng-click="create_table(new_table)">Create</button>
          <button class="btn btn-default btn-sm" type="button" ng-click="quit()">Quit</button>
        </div>
        <div>
          <span>Online Users: </span>
          <span ng-repeat="user in users">{{user + ' '}}</span>
        </div>
      </div>
      <div class="tableArea">
        State: <span>{{state}}</span>
        Table: <span>{{name}}</span>
        Bet: <span>{{bet}}</span>
        Pot: <span>{{pot}}</span>
        Cards: <span ng-repeat="card in community_cards">{{card}}</span>
        <div class="playersArea">
          <div ng-repeat="player in players track by $index" class="player {{positions[player.player]}}" ng-class="{turn: $index==turn}">
            <span class="player_name">{{player.name}}</span>
            <span class="player_chips">{{player.chips}}</span>
            <span class="player_folded">{{player.folded}}</span>
            <span class="player_cards">{{player.cards}}</span>
            <span class="player_hand">{{player.hand}}</span>
            <span class="player_bet">{{player.bet}}</span>
          </div>
        </div>
      </div>
      <div class="controlArea">
        <span class="index">{{player_index}}</span>
        <button class="btn btn-default btn-sm" ng-show="state == 0" ng-click="game_start()"> Start </button>
        <button ass="btn btn-primary" ng-repeat="action in actions" ng-click="game_action(action, range.value)">{{action}}</button>
        <div ng-show="range.min > 0 && range.max > 0 && range.max > range.min">
          <slider ng-model="range.value" floor="{{range.min}}" ceiling="{{range.max}}" step="{{range.step}}"></slider>
          <span>{{range.value}}</span>
          <span ng-repeat="card in cards">{{card}}</span>
        </div>
      </div>
      <div class="chatArea">
        <input class="inputMessage" placeholder="Type here..." ng-model="inputMessage" ng-keydown="keydown($event)" />
        <ul class="messages">
          <li class="log" ng-repeat="message in messages track by $index">
            <span class="messageBody">{{message}}</span>
          </li>
        </ul>
      </div>
    </li>
    <li class="login page" ng-show="!connected">
      <div class="form">
        <span class="alert">{{alert.msg}}</span>
        <div>User Name</div><input class="usernameInput" type="text" ng-model="username"/>
        <div>Password</div><input class="userpassInput" type="password" ng-model="password"/>
        <div>
          <button class="btn btn-default btn-xs" ng-click="login('login')">Login</button>
          <button class="btn btn-default btn-xs" ng-click="login('reg')">Register</button>
        </div>
      </div>
    </li>
  </ul>
</body>
</html>
